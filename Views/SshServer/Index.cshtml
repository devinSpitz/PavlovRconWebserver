@model IEnumerable<SshServer>

@{
    ViewBag.Title = "Rcon Servers";
    Layout = "_Layout";
}


<h2>
    Rcon servers
    <a class="btn btn-sm btn-primary" asp-area="" asp-controller="SshServer" asp-action="EditServer">
        <span class="fas fa-plus"></span>
    </a>
</h2>

<table class="table table-striped table-responsive text-nowrap ">
    <thead>
    <th>
        Id
    </th>
    <th>
        Edit
    </th>
    <th>
        Name
    </th>
    <th>
        Adress
    </th>
    <th>
        Pavlov Server
    </th>
    </thead>
    <tbody>
    @foreach (var sshServer in Model)
    {
        <tr>
            <td>
                <a class="btn btn-sm btn-danger" href="@Url.Action("DeleteServer", new {sshServer.Id})" onclick="return confirm('Are you sure you want to Delete?')">
                    <span class="fas fa-trash-alt"></span>
                </a>
                @sshServer.Id
            </td>
            <td>
                <a class="btn btn-sm btn-primary"href="@Url.Action("EditServer", "SshServer", new {serverId = sshServer.Id})">
                    <span class="fas fa-edit"></span>
                </a>
            </td>
            <td>
                @sshServer.Name
            </td>
            <td>
                @sshServer.Adress
            </td>

            <td>
                @if (sshServer.PavlovServers != null)
                {
                    <table class="table table-sm table-bordered table-responsive">
                        <tr>
                            <th>Gui Name</th>
                            <th>Service state</th>
                            <th>Delete from list</th>
                            <th>System</th>
                            <th>Maps</th>
                            <th>ServerSettings</th>
                            <th>Stop/Start</th>
                        </tr>
                        @foreach (var pavlovServer in sshServer.PavlovServers)
                        {
                            <tr>
                                <td> @pavlovServer.Name </td>
                                <td> @pavlovServer.ServerServiceState </td>
                                <td>
                                    <a class="btn btn-sm btn-danger" href="@Url.Action("DeleteServer", "PavlovServer", new {pavlovServer.Id})" onclick="return confirm('Are you sure you want to Delete?')">
                                        <span class="fas fa-trash-alt"></span>
                                    </a>
                                </td>
                                <td>
                                    <a class="btn btn-sm btn-primary" href="@Url.Action("EditServer", "PavlovServer", new {serverId = pavlovServer.Id, sshServerId = sshServer.Id})">
                                        <span class="fas fa-edit"></span>
                                    </a>
                                </td>
                                <td>
                                    <a class="btn btn-sm btn-primary" href="@Url.Action("EditServerSelectedMaps", "PavlovServer", new {serverId = pavlovServer.Id})">
                                        <span class="fas fa-map"></span>
                                    </a>
                                </td>
                                <td>
                                    <a class="btn btn-sm btn-primary" href="@Url.Action("EditServerSettings", "PavlovServer", new {serverId = pavlovServer.Id})">
                                        <span class="fas fa-cogs"></span>
                                    </a>
                                    <a class="btn btn-sm btn-primary" href="@Url.Action("EditWhiteList", "PavlovServer", new {serverId = pavlovServer.Id})">
                                        <span>WhiteList</span>
                                    </a>
                                    <a class="btn btn-sm btn-primary" href="@Url.Action("EditModList", "PavlovServer", new {serverId = pavlovServer.Id})">
                                        <span>Mods</span>
                                    </a>
                                </td>
                                <td>
                                    <a class="btn btn-sm btn-danger" href="@Url.Action("StopSystemdService", "PavlovServer", new {serverId = pavlovServer.Id})" onclick="return confirm('Are you sure you want to stop the server?')">
                                        <span class="fas fa-stop"></span>
                                    </a>
                                    <a class="btn btn-sm btn-primary" href="@Url.Action("StartSystemdService", "PavlovServer", new {serverId = pavlovServer.Id})">Force <span class="fas fa-play"></span></a>
                                </td>
                            </tr>
                        }

                    </table>
                }
                <a class="btn btn-sm btn-primary mb-1" href="@Url.Action("EditServer", "PavlovServer", new {serverId = 0, sshServerId = sshServer.Id})">
                    <span class="fas fa-plus"></span>
                </a>
            </td>
        </tr>
    }
    </tbody>
</table>